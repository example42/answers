# The Puppet command
<img src="gfx/junior.png" class="skill">

Puppet executable has (pluggable) subcommands with their actions and options

    Usage: puppet <subcommand> [options] <action> [options]

Commonly used options for most subcommands:

    --modulepath=modules:site # Where to look for modules
    --environment=testing     # What Puppet environment to use
    --noop                    # Run in noop mode to avoid any change
    --debug                   # Debug mode
   
---

## Puppet sub commands: help and facts
<img src="gfx/junior.png" class="skill">

Help Yourself

    puppet help

Show system facts

    puppet facts

Equivalent of:

    facter


<asciinema-player cols="200" src="casts/puppet_facts.cast" autoplay="4"></asciinema-player>

---

## Puppet sub commands: agent and apply
<img src="gfx/junior.png" class="skill">
      
Run agent in enforcing or safe mode

    puppet agent -t
    puppet agent -t --noop
              
Execute directly Puppet code in the argument or from a manifest file

    puppet apply -e "package { 'strace: ensure => present' }"
    puppet apply manifest.pp

Apply a JSON catalog, previously generated by a Master

    puppet apply --catalog $(puppet config print client_datadir)/catalog/$(facter fqdn).json

---

## Puppet sub commands: enable and disable
<img src="gfx/junior.png" class="skill">

Disable Puppet agent and prevent it to run in any mode (possibly with a reason)

    puppet agent --disable
    puppet agent --disable "Emergency manual maintenance."

Re-enable a disabled Puppet

    puppet agent --enable

Test Puppet agent on a node where it was disabled, and keep it disabled

    puppet agent --enable ; puppet agent -t --noop ; puppet agent --disable "Puppet disabled for Manual maintenance"

---

## Puppet sub commands: resource
<img src="gfx/junior.png" class="skill">

Show system resources which can be represented in Puppet language

    puppet resource --types

Query all or a specific type of resource
    
    puppet resource package
    puppet resource package nginx

Change the status of a resource (this is done runtime, without using Puppet code)

    puppet resource package nginx ensure=absent

---

## Puppet sub commands: config
<img src="gfx/junior.png" class="skill">

Show the puppet configuration for local user

    puppet config print all

Show the content of running user's puppet.conf

    cat "$(puppet config print confdir)/$(puppet config print config_file_name)"

Show and set a specific config entry, in the given puppet.conf's section

    puppet config print noop --section agent
    puppet config set noop true --section agent

---

## Puppet sub commands: module
<img src="gfx/junior.png" class="skill">

Help Yourself

    puppet help module

Search for something on the Puppet Modules Forge

    puppet module search 

Install a module

    puppet module install puppetlabs-docker

List where modules are installed

    puppet module list

Upgrade a module

    puppet module upgrade puppetlabs-docker

Remove a module

    puppet module uninstall puppetlabs-docker 

<asciinema-player src="casts/puppet_module_command2.cast" cols="200" rows="32" idle-time-limit="1" autoplay="4"></asciinema-player>